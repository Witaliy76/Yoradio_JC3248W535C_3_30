# JC3248W535C: Инструкции для AI-агентов

## Архитектура и компоненты
- Основной проект — ESP32-S3, фреймворк Arduino, сборка через PlatformIO (`platformio.ini`).
- Ключевые директории:
  - `src/` — исходный код, включая ядро, плагины, драйверы, темы, локализацию.
  - `src/plugins/` — пользовательские плагины, расширяющие функциональность через события.
  - `src/displays/`, `src/core/`, `src/drivers/` — реализация работы с дисплеями, аудио, сетью и управлением.
  - `boards/`, `fonts/`, `data/` — конфигурации, шрифты, статические данные.

## Плагины
- Для расширения используйте базовый класс `Plugin` (см. `src/pluginsManager/README.md`).
- Плагины размещайте в `src/plugins/<MyPlugin>`, реализуйте нужные виртуальные методы (`on_setup`, `on_connect`, `on_start_play` и др.).
- Регистрация через `registerPlugin()`.

## Сборка и запуск
- Сборка: используйте PlatformIO (VS Code, командная строка или GUI).
- Конфигурация окружения — секция `[env:yoradio-esp32s3]` в `platformio.ini`.
- 
- Для мониторинга CPU используйте компонент `esp32-perfmon-master` (`perfmon_start()`).

## Внешние зависимости
- Основные библиотеки: Arduino_GFX, IRremoteESP8266, Adafruit GFX, и др. (см. секцию `lib_deps` в `platformio.ini`).
- Для поддержки новых дисплеев или устройств — настройте соответствующие параметры и зависимости.

## Конвенции и паттерны
- Все новые плагины и расширения размещайте строго по структуре проекта.
- Для локализации используйте файлы из `src/locale/`, переключение только на этапе компиляции.
- Для работы с дисплеями используйте Arduino_GFX (см. примеры в `src/src/GFX_Library_for_Arduino/README.md`).
- Для расширения функционала используйте события и виртуальные методы плагинов.

## Примеры
- Пример объявления плагина:
  ```cpp
  class MyPlugin : public Plugin {
    void on_setup() override { /* ... */ }
    void on_connect() override { /* ... */ }
  };
  ```
- Пример смены локализации:
  В `platformio.ini`:
  ```ini
  build_flags = -D_IR_LOCALE_=ru-RU
  ```

## Рекомендации
- Перед добавлением новых функций ознакомьтесь с README в соответствующих директориях.
- Для интеграции новых дисплеев/устройств — проверьте поддержку в Arduino_GFX и настройте параметры.
- Для отладки используйте монитор порта (скорость 115200).

---

Если какие-то разделы требуют уточнения или дополнения — сообщите, чтобы улучшить инструкции.
